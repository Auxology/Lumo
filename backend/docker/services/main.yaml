services:
    main.api:
        image: ${REGISTRY:-lumo}/main-api:${TAG:-latest}
        container_name: lumo-main-api
        build:
            context: ../..
            dockerfile: src/Main/Main.Api/Dockerfile
            args:
                BUILD_CONFIGURATION: ${BUILD_CONFIGURATION:-Release}
        ports:
            - "${MAIN_HTTP_PORT:-5300}:5300"
        environment:
            # ASP.NET Core
            - ASPNETCORE_ENVIRONMENT=${ASPNETCORE_ENVIRONMENT:-Development}
            - ASPNETCORE_URLS=http://+:5300

            # ValkeyOptions
            - Valkey__ConnectionString=${VALKEY_CONNECTION_STRING:-valkey:6379}
            - Valkey__Enabled=${VALKEY_ENABLED:-true}

            # SerilogOptions
            - Serilog__MinimumLevel=${SERILOG_MINIMUM_LEVEL:-Information}
            - Serilog__Seq__ServerUrl=${SERILOG_SEQ_SERVER_URL:-http://seq:5341}
            - Serilog__Seq__ApiKey=${SERILOG_SEQ_API_KEY:-}
            - Serilog__Seq__Enabled=${SERILOG_SEQ_ENABLED:-true}
            - Serilog__Seq__HealthCheckUrl=${SERILOG_SEQ_HEALTH_CHECK_URL:-http://seq:80/api}
            - Serilog__Console__Enabled=${SERILOG_CONSOLE_ENABLED:-true}
            - Serilog__Console__OutputTemplate=${SERILOG_CONSOLE_OUTPUT_TEMPLATE:-[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}}
            - Serilog__OverrideMinimumLevels__Microsoft=${SERILOG_OVERRIDE_MICROSOFT:-Warning}
            - Serilog__OverrideMinimumLevels__Microsoft.Hosting.Lifetime=${SERILOG_OVERRIDE_MICROSOFT_HOSTING:-Information}
            - Serilog__OverrideMinimumLevels__System=${SERILOG_OVERRIDE_SYSTEM:-Warning}

            # OpenTelemetryOptions
            - OpenTelemetry__ServiceName=${OTEL_SERVICE_NAME:-Main.Api}
            - OpenTelemetry__ServiceVersion=${OTEL_SERVICE_VERSION:-}
            - OpenTelemetry__ServiceNamespace=${OTEL_SERVICE_NAMESPACE:-Lumo}
            - OpenTelemetry__Exporter__Endpoint=${OTEL_EXPORTER_ENDPOINT:-http://jaeger:4317}
            - OpenTelemetry__Exporter__Enabled=${OTEL_EXPORTER_ENABLED:-true}
            - OpenTelemetry__Exporter__HealthCheckUrl=${OTEL_EXPORTER_HEALTH_CHECK_URL:-http://jaeger:16686}
            - OpenTelemetry__Tracing__Enabled=${OTEL_TRACING_ENABLED:-true}
            - OpenTelemetry__Tracing__RecordException=${OTEL_TRACING_RECORD_EXCEPTION:-true}
            - OpenTelemetry__Tracing__Instrumentation__AspNetCore=${OTEL_INSTRUMENTATION_ASPNETCORE:-true}
            - OpenTelemetry__Tracing__Instrumentation__HttpClient=${OTEL_INSTRUMENTATION_HTTPCLIENT:-true}
            - OpenTelemetry__Tracing__Instrumentation__SqlClient=${OTEL_INSTRUMENTATION_SQLCLIENT:-true}
            - OpenTelemetry__Tracing__Instrumentation__EntityFrameworkCore=${OTEL_INSTRUMENTATION_EF:-true}
            - OpenTelemetry__Metrics__Enabled=${OTEL_METRICS_ENABLED:-true}
            - OpenTelemetry__Metrics__Instrumentation__AspNetCore=${OTEL_METRICS_ASPNETCORE:-true}
            - OpenTelemetry__Metrics__Instrumentation__HttpClient=${OTEL_METRICS_HTTPCLIENT:-true}
            - OpenTelemetry__Metrics__Instrumentation__Runtime=${OTEL_METRICS_RUNTIME:-true}
            - OpenTelemetry__Metrics__Instrumentation__Process=${OTEL_METRICS_PROCESS:-true}

            # JwtOptions
            - Jwt__Issuer=${JWT_ISSUER:-https://lumo.local}
            - Jwt__Audience=${JWT_AUDIENCE:-lumo-api}
            - Jwt__SecretKey=${JWT_SECRET_KEY:?JWT_SECRET_KEY is required}
            - Jwt__AccessTokenExpiration=${JWT_ACCESS_TOKEN_EXPIRATION:-00:10:00}
            - Jwt__RefreshTokenExpiration=${JWT_REFRESH_TOKEN_EXPIRATION:-30.00:00:00}

            # DatabaseOptions
            - Database__ConnectionString=${MAIN_DATABASE_CONNECTION_STRING:?MAIN_DATABASE_CONNECTION_STRING is required}
            - Database__EnableSensitiveDataLogging=${MAIN_DATABASE_ENABLE_SENSITIVE_DATA_LOGGING:-false}

            # OpenRouterOptions (all values must be defined in .env)
            - OpenRouter__ApiKey=${OPENROUTER_API_KEY:?OPENROUTER_API_KEY is required}
            - OpenRouter__BaseUrl=${OPENROUTER_BASE_URL:?OPENROUTER_BASE_URL is required}
            - OpenRouter__DefaultModel=${OPENROUTER_DEFAULT_MODEL:?OPENROUTER_DEFAULT_MODEL is required}
            - OpenRouter__AppName=${OPENROUTER_APP_NAME:?OPENROUTER_APP_NAME is required}
            - OpenRouter__SiteUrl=${OPENROUTER_SITE_URL:?OPENROUTER_SITE_URL is required}

            # OpenRouter AllowedModels - Model 0 (all values must be defined in .env)
            - OpenRouter__AllowedModels__0__Id=${OPENROUTER_ALLOWED_MODELS_0_ID:?OPENROUTER_ALLOWED_MODELS_0_ID is required}
            - OpenRouter__AllowedModels__0__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_0_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_0_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__0__DisplayName=${OPENROUTER_ALLOWED_MODELS_0_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_0_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__0__Provider=${OPENROUTER_ALLOWED_MODELS_0_PROVIDER:?OPENROUTER_ALLOWED_MODELS_0_PROVIDER is required}
            - OpenRouter__AllowedModels__0__IsDefault=${OPENROUTER_ALLOWED_MODELS_0_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_0_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__0__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_0_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_0_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__0__SupportsVision=${OPENROUTER_ALLOWED_MODELS_0_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_0_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__0__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_0_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_0_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 1 (all values must be defined in .env)
            - OpenRouter__AllowedModels__1__Id=${OPENROUTER_ALLOWED_MODELS_1_ID:?OPENROUTER_ALLOWED_MODELS_1_ID is required}
            - OpenRouter__AllowedModels__1__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_1_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_1_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__1__DisplayName=${OPENROUTER_ALLOWED_MODELS_1_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_1_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__1__Provider=${OPENROUTER_ALLOWED_MODELS_1_PROVIDER:?OPENROUTER_ALLOWED_MODELS_1_PROVIDER is required}
            - OpenRouter__AllowedModels__1__IsDefault=${OPENROUTER_ALLOWED_MODELS_1_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_1_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__1__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_1_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_1_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__1__SupportsVision=${OPENROUTER_ALLOWED_MODELS_1_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_1_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__1__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_1_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_1_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 2 (all values must be defined in .env)
            - OpenRouter__AllowedModels__2__Id=${OPENROUTER_ALLOWED_MODELS_2_ID:?OPENROUTER_ALLOWED_MODELS_2_ID is required}
            - OpenRouter__AllowedModels__2__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_2_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_2_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__2__DisplayName=${OPENROUTER_ALLOWED_MODELS_2_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_2_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__2__Provider=${OPENROUTER_ALLOWED_MODELS_2_PROVIDER:?OPENROUTER_ALLOWED_MODELS_2_PROVIDER is required}
            - OpenRouter__AllowedModels__2__IsDefault=${OPENROUTER_ALLOWED_MODELS_2_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_2_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__2__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_2_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_2_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__2__SupportsVision=${OPENROUTER_ALLOWED_MODELS_2_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_2_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__2__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_2_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_2_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 3 (all values must be defined in .env)
            - OpenRouter__AllowedModels__3__Id=${OPENROUTER_ALLOWED_MODELS_3_ID:?OPENROUTER_ALLOWED_MODELS_3_ID is required}
            - OpenRouter__AllowedModels__3__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_3_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_3_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__3__DisplayName=${OPENROUTER_ALLOWED_MODELS_3_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_3_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__3__Provider=${OPENROUTER_ALLOWED_MODELS_3_PROVIDER:?OPENROUTER_ALLOWED_MODELS_3_PROVIDER is required}
            - OpenRouter__AllowedModels__3__IsDefault=${OPENROUTER_ALLOWED_MODELS_3_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_3_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__3__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_3_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_3_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__3__SupportsVision=${OPENROUTER_ALLOWED_MODELS_3_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_3_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__3__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_3_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_3_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 4 (all values must be defined in .env)
            - OpenRouter__AllowedModels__4__Id=${OPENROUTER_ALLOWED_MODELS_4_ID:?OPENROUTER_ALLOWED_MODELS_4_ID is required}
            - OpenRouter__AllowedModels__4__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_4_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_4_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__4__DisplayName=${OPENROUTER_ALLOWED_MODELS_4_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_4_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__4__Provider=${OPENROUTER_ALLOWED_MODELS_4_PROVIDER:?OPENROUTER_ALLOWED_MODELS_4_PROVIDER is required}
            - OpenRouter__AllowedModels__4__IsDefault=${OPENROUTER_ALLOWED_MODELS_4_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_4_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__4__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_4_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_4_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__4__SupportsVision=${OPENROUTER_ALLOWED_MODELS_4_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_4_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__4__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_4_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_4_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 5 (all values must be defined in .env)
            - OpenRouter__AllowedModels__5__Id=${OPENROUTER_ALLOWED_MODELS_5_ID:?OPENROUTER_ALLOWED_MODELS_5_ID is required}
            - OpenRouter__AllowedModels__5__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_5_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_5_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__5__DisplayName=${OPENROUTER_ALLOWED_MODELS_5_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_5_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__5__Provider=${OPENROUTER_ALLOWED_MODELS_5_PROVIDER:?OPENROUTER_ALLOWED_MODELS_5_PROVIDER is required}
            - OpenRouter__AllowedModels__5__IsDefault=${OPENROUTER_ALLOWED_MODELS_5_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_5_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__5__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_5_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_5_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__5__SupportsVision=${OPENROUTER_ALLOWED_MODELS_5_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_5_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__5__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_5_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_5_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 6 (all values must be defined in .env)
            - OpenRouter__AllowedModels__6__Id=${OPENROUTER_ALLOWED_MODELS_6_ID:?OPENROUTER_ALLOWED_MODELS_6_ID is required}
            - OpenRouter__AllowedModels__6__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_6_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_6_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__6__DisplayName=${OPENROUTER_ALLOWED_MODELS_6_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_6_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__6__Provider=${OPENROUTER_ALLOWED_MODELS_6_PROVIDER:?OPENROUTER_ALLOWED_MODELS_6_PROVIDER is required}
            - OpenRouter__AllowedModels__6__IsDefault=${OPENROUTER_ALLOWED_MODELS_6_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_6_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__6__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_6_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_6_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__6__SupportsVision=${OPENROUTER_ALLOWED_MODELS_6_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_6_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__6__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_6_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_6_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 7 (all values must be defined in .env)
            - OpenRouter__AllowedModels__7__Id=${OPENROUTER_ALLOWED_MODELS_7_ID:?OPENROUTER_ALLOWED_MODELS_7_ID is required}
            - OpenRouter__AllowedModels__7__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_7_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_7_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__7__DisplayName=${OPENROUTER_ALLOWED_MODELS_7_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_7_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__7__Provider=${OPENROUTER_ALLOWED_MODELS_7_PROVIDER:?OPENROUTER_ALLOWED_MODELS_7_PROVIDER is required}
            - OpenRouter__AllowedModels__7__IsDefault=${OPENROUTER_ALLOWED_MODELS_7_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_7_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__7__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_7_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_7_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__7__SupportsVision=${OPENROUTER_ALLOWED_MODELS_7_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_7_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__7__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_7_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_7_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 8 (all values must be defined in .env)
            - OpenRouter__AllowedModels__8__Id=${OPENROUTER_ALLOWED_MODELS_8_ID:?OPENROUTER_ALLOWED_MODELS_8_ID is required}
            - OpenRouter__AllowedModels__8__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_8_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_8_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__8__DisplayName=${OPENROUTER_ALLOWED_MODELS_8_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_8_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__8__Provider=${OPENROUTER_ALLOWED_MODELS_8_PROVIDER:?OPENROUTER_ALLOWED_MODELS_8_PROVIDER is required}
            - OpenRouter__AllowedModels__8__IsDefault=${OPENROUTER_ALLOWED_MODELS_8_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_8_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__8__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_8_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_8_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__8__SupportsVision=${OPENROUTER_ALLOWED_MODELS_8_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_8_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__8__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_8_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_8_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 9 (all values must be defined in .env)
            - OpenRouter__AllowedModels__9__Id=${OPENROUTER_ALLOWED_MODELS_9_ID:?OPENROUTER_ALLOWED_MODELS_9_ID is required}
            - OpenRouter__AllowedModels__9__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_9_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_9_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__9__DisplayName=${OPENROUTER_ALLOWED_MODELS_9_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_9_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__9__Provider=${OPENROUTER_ALLOWED_MODELS_9_PROVIDER:?OPENROUTER_ALLOWED_MODELS_9_PROVIDER is required}
            - OpenRouter__AllowedModels__9__IsDefault=${OPENROUTER_ALLOWED_MODELS_9_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_9_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__9__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_9_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_9_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__9__SupportsVision=${OPENROUTER_ALLOWED_MODELS_9_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_9_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__9__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_9_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_9_SUPPORTS_STREAMING is required}

            # OpenRouter AllowedModels - Model 10 (all values must be defined in .env)
            - OpenRouter__AllowedModels__10__Id=${OPENROUTER_ALLOWED_MODELS_10_ID:?OPENROUTER_ALLOWED_MODELS_10_ID is required}
            - OpenRouter__AllowedModels__10__OpenRouterId=${OPENROUTER_ALLOWED_MODELS_10_OPENROUTER_ID:?OPENROUTER_ALLOWED_MODELS_10_OPENROUTER_ID is required}
            - OpenRouter__AllowedModels__10__DisplayName=${OPENROUTER_ALLOWED_MODELS_10_DISPLAY_NAME:?OPENROUTER_ALLOWED_MODELS_10_DISPLAY_NAME is required}
            - OpenRouter__AllowedModels__10__Provider=${OPENROUTER_ALLOWED_MODELS_10_PROVIDER:?OPENROUTER_ALLOWED_MODELS_10_PROVIDER is required}
            - OpenRouter__AllowedModels__10__IsDefault=${OPENROUTER_ALLOWED_MODELS_10_IS_DEFAULT:?OPENROUTER_ALLOWED_MODELS_10_IS_DEFAULT is required}
            - OpenRouter__AllowedModels__10__MaxContextTokens=${OPENROUTER_ALLOWED_MODELS_10_MAX_CONTEXT_TOKENS:?OPENROUTER_ALLOWED_MODELS_10_MAX_CONTEXT_TOKENS is required}
            - OpenRouter__AllowedModels__10__SupportsVision=${OPENROUTER_ALLOWED_MODELS_10_SUPPORTS_VISION:?OPENROUTER_ALLOWED_MODELS_10_SUPPORTS_VISION is required}
            - OpenRouter__AllowedModels__10__SupportsStreaming=${OPENROUTER_ALLOWED_MODELS_10_SUPPORTS_STREAMING:?OPENROUTER_ALLOWED_MODELS_10_SUPPORTS_STREAMING is required}

            - OpenRouter__EmbeddingModel=${OPENROUTER_EMBEDDING_MODEL:?OPENROUTER_EMBEDDING_MODEL is required}

            # RabbitMqOptions
            - RabbitMq__Host=${RABBITMQ_HOST:?RABBITMQ_HOST is required}
            - RabbitMq__Port=${RABBITMQ_PORT:?RABBITMQ_PORT is required}
            - RabbitMq__VirtualHost=${RABBITMQ_VIRTUAL_HOST:?RABBITMQ_VIRTUAL_HOST is required}
            - RabbitMq__Username=${RABBITMQ_USERNAME:?RABBITMQ_USERNAME is required}
            - RabbitMq__Password=${RABBITMQ_PASSWORD:?RABBITMQ_PASSWORD is required}     
        networks:
            - lumo-network
        depends_on:
            valkey:
                condition: service_healthy
            seq:
                condition: service_healthy
            jaeger:
                condition: service_healthy
            rabbitmq:
                condition: service_healthy
            gateway.api:
                condition: service_healthy
            main-database:
                condition: service_healthy
        restart: unless-stopped
        healthcheck:
            test:
                [
                    "CMD",
                    "curl",
                    "--fail",
                    "--silent",
                    "http://localhost:5300/health/live",
                ]
            interval: ${MAIN_HEALTHCHECK_INTERVAL:-10s}
            timeout: ${MAIN_HEALTHCHECK_TIMEOUT:-5s}
            retries: ${MAIN_HEALTHCHECK_RETRIES:-3}
            start_period: ${MAIN_HEALTHCHECK_START_PERIOD:-30s}
        deploy:
            resources:
                limits:
                    memory: 512M
                reservations:
                    memory: 256M
        labels:
            - "lumo.service=main-api"
            - "lumo.tier=application"
